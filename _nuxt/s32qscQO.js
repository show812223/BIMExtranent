import{aq as W,ar as ae,N as w,O as q,P as k,c as y,g as fe,z as l,a1 as $,as as K,d as j,ac as oe,t as x,L as C,A as h,B as H,y as N,M as S,v as O,at as me,a0 as le,Q as L,V as ge,Z as U,W as he,X as ye,au as _,av as be,$ as D,r as A,aw as pe,H as E,o as X,e as xe,ax as Se,a4 as ne,ay as Ve,az as _e,F as we,aA as ke,a8 as Te,aB as Be,ab as Ce,x as Ee,aC as Pe,i as Ie,aD as Ne}from"./CDMwRna9.js";import{u as se}from"./CGWdrzfI.js";import{_ as M,m as $e,u as Ae,V as G,a as Le}from"./Cih1uv7r.js";import{V as De,u as Me}from"./Dxkh4y_u.js";import{m as Y}from"./sj1_xYdN.js";import{o as Re,k as Fe,p as ze,q as He,r as Oe,s as Ue,t as z,v as We,l as B,n as qe,w as je,x as Xe}from"./DGpfm_ih.js";import{m as Ye,u as Ke,V as Ge}from"./BxtRHTqe.js";import{u as Qe,V as Ze}from"./Cpnl-mqZ.js";import{a as R,d as Je,s as Q,b as et,g as tt,n as at,f as ot}from"./BUuIBmwz.js";const re=W.reduce((e,s)=>(e[s]={type:[Boolean,String,Number],default:!1},e),{}),ie=W.reduce((e,s)=>{const t="offset"+ae(s);return e[t]={type:[String,Number],default:null},e},{}),ue=W.reduce((e,s)=>{const t="order"+ae(s);return e[t]={type:[String,Number],default:null},e},{}),Z={col:Object.keys(re),offset:Object.keys(ie),order:Object.keys(ue)};function lt(e,s,t){let n=e;if(!(t==null||t===!1)){if(s){const a=s.replace(e,"");n+=`-${a}`}return e==="col"&&(n="v-"+n),e==="col"&&(t===""||t===!0)||(n+=`-${t}`),n.toLowerCase()}}const nt=["auto","start","end","center","baseline","stretch"],st=w({cols:{type:[Boolean,String,Number],default:!1},...re,offset:{type:[String,Number],default:null},...ie,order:{type:[String,Number],default:null},...ue,alignSelf:{type:String,default:null,validator:e=>nt.includes(e)},...q(),...Y()},"VCol"),F=k()({name:"VCol",props:st(),setup(e,s){let{slots:t}=s;const n=y(()=>{const a=[];let o;for(o in Z)Z[o].forEach(v=>{const f=e[v],d=lt(o,v,f);d&&a.push(d)});const u=a.some(v=>v.startsWith("v-col-"));return a.push({"v-col":!u||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),a});return()=>{var a;return fe(e.tag,{class:[n.value,e.class],style:e.style},(a=t.default)==null?void 0:a.call(t))}}}),rt=Re("v-spacer","div","VSpacer"),it=w({target:[Object,Array]},"v-dialog-transition"),ut=k()({name:"VDialogTransition",props:it(),setup(e,s){let{slots:t}=s;const n={onBeforeEnter(a){a.style.pointerEvents="none",a.style.visibility="hidden"},async onEnter(a,o){var c;await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),a.style.visibility="";const{x:u,y:v,sx:f,sy:d,speed:i}=ee(e.target,a),m=R(a,[{transform:`translate(${u}px, ${v}px) scale(${f}, ${d})`,opacity:0},{}],{duration:225*i,easing:Je});(c=J(a))==null||c.forEach(r=>{R(r,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*i,easing:Q})}),m.finished.then(()=>o())},onAfterEnter(a){a.style.removeProperty("pointer-events")},onBeforeLeave(a){a.style.pointerEvents="none"},async onLeave(a,o){var c;await new Promise(r=>requestAnimationFrame(r));const{x:u,y:v,sx:f,sy:d,speed:i}=ee(e.target,a);R(a,[{},{transform:`translate(${u}px, ${v}px) scale(${f}, ${d})`,opacity:0}],{duration:125*i,easing:et}).finished.then(()=>o()),(c=J(a))==null||c.forEach(r=>{R(r,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*i,easing:Q})})},onAfterLeave(a){a.style.removeProperty("pointer-events")}};return()=>e.target?l(K,$({name:"dialog-transition"},n,{css:!1}),t):l(K,{name:"dialog-transition"},t)}});function J(e){var t;const s=(t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:t.children;return s&&[...s]}function ee(e,s){const t=tt(e),n=at(s),[a,o]=getComputedStyle(s).transformOrigin.split(" ").map(g=>parseFloat(g)),[u,v]=getComputedStyle(s).getPropertyValue("--v-overlay-anchor-origin").split(" ");let f=t.left+t.width/2;u==="left"||v==="left"?f-=t.width/2:(u==="right"||v==="right")&&(f+=t.width/2);let d=t.top+t.height/2;u==="top"||v==="top"?d-=t.height/2:(u==="bottom"||v==="bottom")&&(d+=t.height/2);const i=t.width/n.width,m=t.height/n.height,c=Math.max(1,i,m),r=i/c||0,b=m/c||0,p=n.width*n.height/(window.innerWidth*window.innerHeight),T=p>.12?Math.min(1.5,(p-.12)*10+1):1;return{x:f-(a+n.left),y:d-(o+n.top),sx:r,sy:b,speed:T}}const ct=j({__name:"Main",setup(e){const t=oe().userInfo;return(n,a)=>(x(),C(De,{"no-gutters":""},{default:h(()=>[l(F,{cols:"12",md:"3"},{default:h(()=>[l(M,{label:"使用者名稱"},{value:h(()=>{var o;return[H(N((o=S(t))==null?void 0:o.userName),1)]}),_:1})]),_:1}),l(F,{cols:"12",md:"3"},{default:h(()=>[l(M,{label:"帳號"},{value:h(()=>{var o,u;return[H(N((o=S(t))==null?void 0:o.domain)+"\\"+N((u=S(t))==null?void 0:u.account),1)]}),_:1})]),_:1}),l(F,{cols:"12",md:"3"},{default:h(()=>[l(M,{label:"單位"},{value:h(()=>{var o;return[(x(!0),O(le,null,me((o=S(t))==null?void 0:o.companies,u=>(x(),O("div",{class:"text-body-1",key:u.companyNo},N(u.name),1))),128))]}),_:1})]),_:1}),l(F,{cols:"12",md:"3"},{default:h(()=>[l(M,{label:"啟用",isText:!1},{value:h(()=>[l(Fe,{"model-value":S(t).isEnable,disabled:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}))}}),ce=w({text:String,...q(),...Y()},"VToolbarTitle"),de=k()({name:"VToolbarTitle",props:ce(),setup(e,s){let{slots:t}=s;return L(()=>{const n=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var a;return[n&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(a=t.default)==null?void 0:a.call(t)])]}})}),{}}}),dt=[null,"prominent","default","comfortable","compact"],ve=w({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>dt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ze(),...q(),...He(),...Ye(),...Y({tag:"header"}),...ge()},"VToolbar"),te=k()({name:"VToolbar",props:ve(),setup(e,s){var r;let{slots:t}=s;const{backgroundColorClasses:n,backgroundColorStyles:a}=Me(U(e,"color")),{borderClasses:o}=Oe(e),{elevationClasses:u}=Ue(e),{roundedClasses:v}=Ke(e),{themeClasses:f}=he(e),{rtlClasses:d}=ye(),i=_(!!(e.extended||(r=t.extension)!=null&&r.call(t))),m=y(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),c=y(()=>i.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return be({VBtn:{variant:"text"}}),L(()=>{var g;const b=!!(e.title||t.title),p=!!(t.image||e.image),T=(g=t.extension)==null?void 0:g.call(t);return i.value=!!(e.extended||T),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},n.value,o.value,u.value,v.value,f.value,d.value,e.class],style:[a.value,e.style]},{default:()=>[p&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(z,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(Ge,{key:"image-img",cover:!0,src:e.image},null)]),l(z,{defaults:{VTabs:{height:D(m.value)}}},{default:()=>{var V,P,I;return[l("div",{class:"v-toolbar__content",style:{height:D(m.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(V=t.prepend)==null?void 0:V.call(t)]),b&&l(de,{key:"title",text:e.title},{text:t.title}),(P=t.default)==null?void 0:P.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(I=t.append)==null?void 0:I.call(t)])])]}}),l(z,{defaults:{VTabs:{height:D(c.value)}}},{default:()=>[l(We,null,{default:()=>[i.value&&l("div",{class:"v-toolbar__extension",style:{height:D(c.value)}},[T])]})]})]})}),{contentHeight:m,extensionHeight:c}}}),vt=w({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ft(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=s;let n=0;const a=A(null),o=_(0),u=_(0),v=_(0),f=_(!1),d=_(!1),i=y(()=>Number(e.scrollThreshold)),m=y(()=>pe((i.value-o.value)/i.value||0)),c=()=>{const r=a.value;!r||t&&!t.value||(n=o.value,o.value="window"in r?r.pageYOffset:r.scrollTop,d.value=o.value<n,v.value=Math.abs(o.value-i.value))};return E(d,()=>{u.value=u.value||o.value}),E(f,()=>{u.value=0}),X(()=>{E(()=>e.scrollTarget,r=>{var p;const b=r?document.querySelector(r):window;b&&b!==a.value&&((p=a.value)==null||p.removeEventListener("scroll",c),a.value=b,a.value.addEventListener("scroll",c,{passive:!0}))},{immediate:!0})}),xe(()=>{var r;(r=a.value)==null||r.removeEventListener("scroll",c)}),t&&E(t,c,{immediate:!0}),{scrollThreshold:i,currentScroll:o,currentThreshold:v,isScrollActive:f,scrollRatio:m,isScrollingUp:d,savedScroll:u}}const mt=w({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ve(),...Se(),...vt(),height:{type:[Number,String],default:64}},"VAppBar"),gt=k()({name:"VAppBar",props:mt(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:t}=s;const n=A(),a=ne(e,"modelValue"),o=y(()=>{var V;const g=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:g.has("hide"),inverted:g.has("inverted"),collapse:g.has("collapse"),elevate:g.has("elevate"),fadeImage:g.has("fade-image")}}),u=y(()=>{const g=o.value;return g.hide||g.inverted||g.collapse||g.elevate||g.fadeImage||!a.value}),{currentScroll:v,scrollThreshold:f,isScrollingUp:d,scrollRatio:i}=ft(e,{canScroll:u}),m=y(()=>e.collapse||o.value.collapse&&(o.value.inverted?i.value>0:i.value===0)),c=y(()=>e.flat||o.value.elevate&&(o.value.inverted?v.value>0:v.value===0)),r=y(()=>o.value.fadeImage?o.value.inverted?1-i.value:i.value:void 0),b=y(()=>{var P,I;if(o.value.hide&&o.value.inverted)return 0;const g=((P=n.value)==null?void 0:P.contentHeight)??0,V=((I=n.value)==null?void 0:I.extensionHeight)??0;return g+V});Ve(y(()=>!!e.scrollBehavior),()=>{we(()=>{o.value.hide?o.value.inverted?a.value=v.value>f.value:a.value=d.value||v.value<f.value:a.value=!0})});const{ssrBootStyles:p}=Qe(),{layoutItemStyles:T}=_e({id:e.name,order:y(()=>parseInt(e.order,10)),position:U(e,"location"),layoutSize:b,elementSize:_(void 0),active:a,absolute:U(e,"absolute")});return L(()=>{const g=te.filterProps(e);return l(te,$({ref:n,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...T.value,"--v-toolbar-image-opacity":r.value,height:void 0,...p.value},e.style]},g,{collapse:m.value,flat:c.value}),t)}),{}}}),ht=k()({name:"VAppBarTitle",props:ce(),setup(e,s){let{slots:t}=s;return L(()=>l(de,$(e,{class:"v-app-bar-title"}),t)),{}}}),yt=w({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...$e({origin:"center center",scrollStrategy:"block",transition:{component:ut},zIndex:2400})},"VDialog"),bt=k()({name:"VDialog",props:yt(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:t}=s;const n=ne(e,"modelValue"),{scopeId:a}=Ae(),o=A();function u(f){var m,c;const d=f.relatedTarget,i=f.target;if(d!==i&&((m=o.value)!=null&&m.contentEl)&&((c=o.value)!=null&&c.globalTop)&&![document,o.value.contentEl].includes(i)&&!o.value.contentEl.contains(i)){const r=Be(o.value.contentEl);if(!r.length)return;const b=r[0],p=r[r.length-1];d===b?p.focus():b.focus()}}ke&&E(()=>n.value&&e.retainFocus,f=>{f?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0}),E(n,async f=>{var d,i;await Te(),f?(d=o.value.contentEl)==null||d.focus({preventScroll:!0}):(i=o.value.activatorEl)==null||i.focus({preventScroll:!0})});const v=y(()=>$({"aria-haspopup":"dialog","aria-expanded":String(n.value)},e.activatorProps));return L(()=>{const f=G.filterProps(e);return l(G,$({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},f,{modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,"aria-modal":"true",activatorProps:v.value,role:"dialog"},a),{activator:t.activator,default:function(){for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];return l(z,{root:"VDialog"},{default:()=>{var c;return[(c=t.default)==null?void 0:c.call(t,...i)]}})}})}),ot({},o)}}),pt={key:2,class:"text-subtitle-2 font-weight-black"},xt=Ee("div",{class:"text-h6 font-weight-black"}," 使用者資料 ",-1),St=j({__name:"Navigation",setup(e){const s=Ce(),t=oe(),n=se(),a=A(!1),o=A("600px"),u=y(()=>n.getIsMobile),v=y(()=>{const c=t.userInfo;return c==null?"未登入":`${c.userName}(${c.domain}\\${c.account})`});X(()=>{window.innerWidth<600&&(o.value="90%")});const f=()=>{t.flush(),window.location.href="/"},d=()=>{s.push("/login")},i=()=>{a.value=!0},m=()=>{s.push("/")};return(c,r)=>(x(),O(le,null,[l(gt,{id:"navigation"},{default:h(()=>[l(ht,null,{default:h(()=>[l(B,{variant:"text",size:"x-large",class:"py-0 px-3 font-20",onClick:m},{default:h(()=>[H(" BIM管理系統 ")]),_:1})]),_:1}),l(rt),u.value&&S(t).isAuthenticated?(x(),C(B,{key:0,class:"icon-button",icon:"mdi-account",variant:"text",size:"large",onClick:i})):!u.value&&S(t).isAuthenticated?(x(),C(B,{key:1,"epend-icon":"mdi-account",variant:"text",size:"large",class:"py-0 px-3",onClick:i},{default:h(()=>[H(N(v.value),1)]),_:1})):(x(),O("div",pt," 未登入 ")),S(t).isAuthenticated?(x(),C(B,{key:3,class:"icon-button",icon:"mdi-logout",variant:"text",size:"large",onClick:f})):(x(),C(B,{key:4,class:"icon-button",icon:"mdi-login",variant:"text",size:"large",onClick:d}))]),_:1}),l(bt,{"max-width":"500",modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=b=>a.value=b),persistent:!0},{default:h(()=>[l(qe,null,{default:h(()=>[l(je,{class:"d-flex justify-space-between align-center"},{default:h(()=>[xt,l(B,{icon:"mdi-close",variant:"text",onClick:r[0]||(r[0]=b=>a.value=!1)})]),_:1}),l(Le,{class:"mb-2"}),l(Xe,{class:"pt-0"},{default:h(()=>[l(ct)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),It=j({__name:"default",setup(e){const s=se(),t=Pe();return X(()=>{var u;const n="BIM管理系統",a=(u=t.meta)==null?void 0:u.title,o=a?`${a} - ${n}`:n;document.title=o,window.addEventListener("resize",()=>{const v=window.innerWidth;s.setScreenWidth(v),v<600?s.setIsMobile(!0):s.setIsMobile(!1)})}),(n,a)=>{const o=Ie("router-view");return x(),C(Ne,null,{default:h(()=>[l(St),l(Ze,null,{default:h(()=>[l(o)]),_:1})]),_:1})}}});export{It as default};
